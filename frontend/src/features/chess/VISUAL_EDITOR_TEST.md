# 可视化规则编辑器 - 快速测试指南

## 🚀 访问方式

1. 启动项目后，访问: `http://localhost:5173/app/visual-editor`
2. 或从主页点击: **自定义棋局 → 🎨 可视化编辑器**

## ✅ 检查清单

### 1. 页面加载
- [ ] 页面标题显示："🎨 可视化规则编辑器"
- [ ] 左侧有7个棋子按钮
- [ ] 中间有9x9的棋盘
- [ ] 棋盘中心格子是红色，显示"车"（默认选中）

### 2. 棋盘显示
**棋盘应该是这样的：**
```
□ □ □ □ □ □ □ □ □
□ □ □ □ □ □ □ □ □
□ □ □ □ □ □ □ □ □
□ □ □ □ □ □ □ □ □
□ □ □ □ 车 □ □ □ □  ← 中心红色格子（车）
□ □ □ □ □ □ □ □ □
□ □ □ □ □ □ □ □ □
□ □ □ □ □ □ □ □ □
□ □ □ □ □ □ □ □ □
```

- [ ] 棋盘尺寸：9列 × 9行
- [ ] 每个格子：50px × 50px
- [ ] 格子边框：灰色
- [ ] 棋盘外边框：深灰色，3px

### 3. 交互测试

#### 测试1：选择棋子
1. 点击"马"按钮
2. 检查：
   - [ ] "马"按钮变蓝色
   - [ ] 棋盘中心显示"马"而不是"车"

#### 测试2：点击棋盘添加移动位置
1. 点击中心格子上方一格
2. 检查：
   - [ ] 该格子变成绿色
   - [ ] 格子中间有蓝色圆点
   - [ ] "已选择 1 个位置"

3. 再点击中心格子右侧一格
4. 检查：
   - [ ] 该格子也变绿色
   - [ ] "已选择 2 个位置"

#### 测试3：删除模式
1. 点击"➖ 删除"按钮
2. 点击一个绿色格子
3. 检查：
   - [ ] 格子变回白色
   - [ ] 蓝色圆点消失
   - [ ] 位置计数减少

#### 测试4：鼠标悬停
1. 鼠标移到白色格子上
2. 检查：
   - [ ] 格子变成浅灰色
3. 鼠标移开
4. 检查：
   - [ ] 格子变回白色

#### 测试5：中心格子
1. 尝试点击红色中心格子
2. 检查：
   - [ ] 无反应
   - [ ] 不能选择中心格子

### 4. 功能测试

#### 测试：创建车的规则
1. 选择"车"棋子
2. 在中心的上、下、左、右各点一格
3. 勾选"可重复移动"
4. 点击"✅ 应用规则"
5. 检查：
   - [ ] 弹出"已应用规则到 车"
6. 滚动到底部查看"当前规则预览"
7. 检查JSON中有4个movePatterns

#### 测试：保存和加载
1. 点击"💾 保存所有规则"
2. 检查：
   - [ ] 弹出"规则已保存！"
3. 点击"📥 加载当前规则"
4. 检查：
   - [ ] 之前选择的4个格子重新显示为绿色

## 🐛 常见问题排查

### 问题1：看不到棋盘
**症状**：页面空白或只有标题

**检查**：
1. 打开浏览器开发者工具（F12）
2. 查看Console是否有错误
3. 检查Elements中是否有棋盘div

**可能原因**：
- React组件加载失败
- 路由配置错误

**解决**：
```bash
# 重启开发服务器
cd frontend
npm run dev
```

### 问题2：棋盘太小
**症状**：格子看不清

**原因**：浏览器缩放不是100%

**解决**：按 `Ctrl + 0` 重置缩放

### 问题3：点击无反应
**症状**：点击格子没有变色

**检查**：
1. 确认编辑模式是"添加"（绿色按钮）
2. 确认点击的不是中心格子
3. F12查看Console是否有JavaScript错误

### 问题4：样式错乱
**症状**：按钮或布局不正常

**原因**：CSS未加载

**解决**：
1. 检查Tailwind CSS是否正常工作
2. 当前版本已改用内联样式，应该不会有这个问题

## 📸 预期效果截图说明

### 初始状态
- 白色背景页面
- 琥珀色渐变背景
- 左侧棋子按钮面板
- 中间大棋盘（9x9）
- 中心红色格子显示"车"

### 选择后状态
- 部分格子变绿色
- 绿色格子中有蓝色圆点
- 顶部显示"已选择 N 个位置"

### 应用后效果
- 弹出确认提示
- 底部预览区显示JSON规则

## 🎯 快速功能演示

### 演示1：创建标准车（30秒）
```
1. 选择"车"
2. 点击：上、下、左、右各一格
3. 勾选"可重复移动"
4. 点击"应用规则"
5. 点击"保存"
```

### 演示2：创建马（20秒）
```
1. 选择"马"
2. 点击8个日字位置
3. 不勾选"可重复"
4. 点击"应用规则"
```

### 演示3：创建超级兵（15秒）
```
1. 选择"兵/卒"
2. 点击周围8个格子
3. 点击"应用规则"
```

## 🔧 调试技巧

### 查看实时状态
打开浏览器Console，输入：
```javascript
// 查看选中的格子
JSON.parse(localStorage.getItem('customRuleSet'))

// 清除所有规则（重置）
localStorage.removeItem('customRuleSet')
location.reload()
```

### 查看组件状态
在Chrome DevTools中：
1. 安装React Developer Tools扩展
2. 切换到Components标签
3. 选择VisualRuleEditor组件
4. 查看：
   - selectedPiece
   - selectedCells
   - ruleSet

## ✨ 成功标志

如果一切正常，你应该能：
1. ✅ 看到完整的9x9棋盘
2. ✅ 点击格子能变色
3. ✅ 切换棋子，中心格子文字改变
4. ✅ 应用规则后能在预览中看到JSON
5. ✅ 保存后能加载回来

## 📞 需要帮助？

如果以上都测试通过，可以开始对局：
1. 点击"▶️ 开始对局"
2. 在棋盘上验证规则是否生效

---

**测试完成时间**：约5分钟
**建议浏览器**：Chrome, Edge, Firefox
